webpackJsonp([8],{PLxh:function(e,i){},tJ7h:function(e,i,t){"use strict";var o=t("Dd8w"),n=t.n(o),s=t("NYxO"),a=t("/o5o"),l=(t("PJh5"),{name:"ProfileInfo",components:{Modal:a.a},props:{me:Boolean,online:Boolean,blocked:Boolean,friend:String,meBlocked:Boolean,info:Object},data:function(){return{modalShow:!1,modalText:"",modalType:"deleteFriend"}},computed:n()({},Object(s.c)("profile/dialogs",["dialogs"]),{statusText:function(){return this.online?"онлайн":"не в сети"},blockedText:function(){return this.blocked?"Пользователь заблокирован":"Заблокировать"},btnVariantInfo:function(){return this.blocked?{variant:"red",text:"Разблокировать"}:"FRIEND"===this.friend?{variant:"red",text:"Удалить из друзей"}:"REQUEST_RECEIVED"===this.friend?{variant:"blue",text:"Запрос в друзья"}:"REQUEST_SENT"===this.friend?{variant:"white",text:"Отменить запрос в друзья"}:{variant:"white",text:"Добавить в друзья"}}}),methods:n()({},Object(s.b)("users/actions",["apiBlockUser","apiUnblockUser"]),Object(s.b)("profile/friends",["apiAddFriends","apiDeleteFriends","apiDeclineFriendRequest","apiAcceptFriendRequest","apiCancelFriendRequest"]),Object(s.b)("profile/dialogs",["createDialogWithUser","apiLoadAllDialogs"]),Object(s.b)("users/info",["apiInfo"]),{blockedUser:function(){this.blocked||(this.modalText="Вы уверены, что хотите заблокировать пользователя "+this.info.fullName+"?",this.modalShow=!0,this.modalType="block")},profileAction:function(){var e=this;if(!this.blocked)return"FRIEND"===this.friend?(this.modalText="Вы уверены, что хотите удалить пользователя "+this.info.fullName+" из друзей?",this.modalShow=!0,void(this.modalType="deleteFriend")):"REQUEST_RECEIVED"===this.friend?(this.modalText="Добавить "+this.info.fullName+" в друзья?",this.modalShow=!0,void(this.modalType="requestReceived")):void("REQUEST_SENT"!==this.friend?this.apiAddFriends(this.info.id).then(function(){e.apiInfo(e.$route.params.id)}):this.apiCancelFriendRequest(this.info.id).then(function(){e.apiInfo(e.$route.params.id)}));this.apiUnblockUser(this.$route.params.id).then(function(){e.apiInfo(e.$route.params.id)})},closeModal:function(){this.modalShow=!1},onConfirm:function(){var e=this;"block"!==this.modalType?"deleteFriend"!==this.modalType?"requestReceived"!==this.modalType||this.apiAcceptFriendRequest(this.info.id).then(function(){e.apiInfo(e.$route.params.id),e.closeModal()}):this.apiDeleteFriends(this.$route.params.id).then(function(){e.apiInfo(e.$route.params.id),e.closeModal()}):this.apiBlockUser(this.$route.params.id).then(function(){e.apiInfo(e.$route.params.id),e.closeModal()})},onDeclineFriendRequest:function(){var e=this;this.apiDeclineFriendRequest(this.$route.params.id).then(function(){e.apiInfo(e.$route.params.id),e.closeModal()})},onSentMessage:function(){if(this.blocked)return!1;this.$router.push({name:"Im",query:{userId:this.info.id}})},ageToStr:function(e){var i=e%100;return e+" "+(i>=5&&i<=20?"лет":1==(i%=10)?"год":i>=2&&i<=4?"года":"лет")}})}),r={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return e.info?t("div",{staticClass:"profile-info"},[t("div",{staticClass:"profile-info__pic"},[t("div",{staticClass:"profile-info__img",class:{offline:!e.online&&!e.me}},[e.info.photo?t("img",{attrs:{src:e.info.photo,alt:e.info.fullName}}):t("img",{attrs:{src:"/static/img/user/2.webp",alt:e.info.fullName}})]),e.me||!e.meBlocked||e.blocked?!e.me&&e.meBlocked&&e.blocked?t("div",{staticClass:"profile-info__actions"},[t("button-hover",{attrs:{disable:e.blocked},nativeOn:{click:function(i){return e.onSentMessage(i)}}},[e._v("Вы заблокированы")]),t("button-hover",{staticClass:"profile-info__add",attrs:{variant:e.btnVariantInfo.variant,bordered:"bordered"},nativeOn:{click:function(i){return e.profileAction(i)}}},[e._v(e._s(e.btnVariantInfo.text))])],1):e.me?e._e():t("div",{staticClass:"profile-info__actions"},[t("button-hover",{attrs:{disable:e.blocked},nativeOn:{click:function(i){return e.onSentMessage(i)}}},[e._v("Написать сообщение")]),t("button-hover",{staticClass:"profile-info__add",attrs:{variant:e.btnVariantInfo.variant,bordered:"bordered"},nativeOn:{click:function(i){return e.profileAction(i)}}},[e._v(e._s(e.btnVariantInfo.text))])],1):t("div",{staticClass:"profile-info__actions"},[t("button-hover",{attrs:{disable:"disable"}},[e._v("Вы заблокированы")])],1)]),t("div",{staticClass:"profile-info__main"},[e.me?t("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Редактировать профиль",expression:"'Редактировать профиль'",modifiers:{bottom:!0}}],staticClass:"edit",attrs:{to:{name:"Settings"}}},[t("simple-svg",{attrs:{filepath:"/static/img/edit.svg"}})],1):t("span",{staticClass:"profile-info__blocked",class:{blocked:e.blocked},on:{click:e.blockedUser}},[e._v(e._s(e.blockedText))]),t("div",{staticClass:"profile-info__header"},[t("h1",{staticClass:"profile-info__name"},[e._v(e._s(e.info.fullName))]),t("span",{staticClass:"user-status",class:{online:e.online,offline:!e.online}},[e._v(e._s(e.statusText))])]),t("div",{staticClass:"profile-info__block"},[t("span",{staticClass:"profile-info__title"},[e._v("Дата рождения:")]),e.info.birth_date?t("span",{staticClass:"profile-info__val"},[e._v(e._s(e._f("moment")(e.info.birth_date,"D MMMM YYYY"))+" ("+e._s(e.ageToStr(e.info.ages))+")")]):t("span",{staticClass:"profile-info__val"},[e._v("не заполнено")])]),t("div",{staticClass:"profile-info__block"},[t("span",{staticClass:"profile-info__title"},[e._v("Телефон:")]),e.info.phone?t("a",{staticClass:"profile-info__val",attrs:{href:"tel:"+e.info.phone}},[e._v(e._s(e._f("phone")(e.info.phone)))]):t("a",{staticClass:"profile-info__val"},[e._v("не заполнено")])]),t("div",{staticClass:"profile-info__block"},[t("span",{staticClass:"profile-info__title"},[e._v("Страна:")]),e.info.country?t("span",{staticClass:"profile-info__val"},[e._v(e._s(e.info.country))]):t("span",{staticClass:"profile-info__val"},[e._v("не заполнено")])]),t("div",{staticClass:"profile-info__block"},[t("span",{staticClass:"profile-info__title"},[e._v("Город:")]),e.info.city?t("span",{staticClass:"profile-info__val"},[e._v(e._s(e.info.city))]):t("span",{staticClass:"profile-info__val"},[e._v("не заполнено")])]),t("div",{staticClass:"profile-info__block"},[t("span",{staticClass:"profile-info__title"},[e._v("О себе:")]),e.info.about?t("span",{staticClass:"profile-info__val"},[e._v(e._s(e.info.about))]):t("span",{staticClass:"profile-info__val"},[e._v("не заполнено")])])],1),t("modal",{model:{value:e.modalShow,callback:function(i){e.modalShow=i},expression:"modalShow"}},[e.modalText?t("p",[e._v(e._s(e.modalText))]):e._e(),t("template",{slot:"actions"},["requestReceived"!=e.modalType?t("button-hover",{nativeOn:{click:function(i){return i.preventDefault(),e.onConfirm(i)}}},[e._v("Да")]):t("button-hover",{nativeOn:{click:function(i){return i.preventDefault(),e.onConfirm(i)}}},[e._v("Принять")]),"requestReceived"!=e.modalType?t("button-hover",{attrs:{variant:"red",bordered:"bordered"},nativeOn:{click:function(i){return e.closeModal(i)}}},[e._v("Отмена")]):t("button-hover",{attrs:{variant:"red",bordered:"bordered"},nativeOn:{click:function(i){return e.onDeclineFriendRequest(i)}}},[e._v("Отклонить")])],1)],2)],1):e._e()},staticRenderFns:[]};var f=t("VU/8")(l,r,!1,function(e){t("PLxh")},null,null);i.a=f.exports},xX9V:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("Dd8w"),n=t.n(o),s=t("UBpT"),a=t("tJ7h"),l=t("0Hd5"),r=t("NYxO"),f={name:"ProfileId",components:{FriendsPossible:s.a,ProfileInfo:a.a,NewsBlock:l.a},data:function(){return{loading:!1}},computed:n()({},Object(r.c)("users/info",["getUsersInfo","getWall"])),methods:n()({},Object(r.b)("users/info",["userInfoId"])),created:function(){this.userInfoId(this.$route.params.id)}},c={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return e.getUsersInfo?t("div",{staticClass:"profile inner-page"},[t("div",{staticClass:"inner-page__main"},[t("div",{staticClass:"profile__info"},[t("profile-info",{attrs:{info:e.getUsersInfo,me:e.getUsersInfo.me,meBlocked:e.getUsersInfo.is_you_blocked,blocked:e.getUsersInfo.is_blocked,friend:e.getUsersInfo.is_friend,online:e.getUsersInfo.is_onlined}})],1),t("div",{staticClass:"profile__news"},[t("div",{staticClass:"profile__tabs"},[t("span",{staticClass:"profile__tab active"},[e._v("Публикации "+e._s(e.getUsersInfo.first_name)+" ("+e._s(e.getWall.length)+")")])]),t("div",{staticClass:"profile__news-list"},e._l(e.getWall,function(e){return t("news-block",{key:e.id,attrs:{info:e}})}),1)])]),t("div",{staticClass:"inner-page__aside"},[t("friends-possible")],1)]):e._e()},staticRenderFns:[]},d=t("VU/8")(f,c,!1,null,null,null);i.default=d.exports}});
//# sourceMappingURL=8.0a8cbf5e17aeb8ef2cab.js.map